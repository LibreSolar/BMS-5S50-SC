EESchema Schematic File Version 2
LIBS:BMS-5s-rescue
LIBS:IEC-60617
LIBS:LibreSolar
LIBS:power
LIBS:device
LIBS:conn
LIBS:logo
LIBS:BMS-5s-cache
EELAYER 26 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 6
Title "Libre Solar BMS 5s"
Date "2017-05-27"
Rev "0.1"
Comp "Libre Solar (http://libre.solar)"
Comment1 "License: CC-BY-SA"
Comment2 "Author: Martin Jäger"
Comment3 ""
Comment4 ""
$EndDescr
$Sheet
S 6200 3300 1200 2100
U 58ACC63A
F0 "BQ76920" 50
F1 "bq76920.sch" 50
F2 "SDA" B L 6200 3400 50 
F3 "SCL" I L 6200 3500 50 
F4 "CHG_EN" O R 7400 3700 50 
F5 "DSG_EN" O R 7400 3800 50 
F6 "BQ_ALERT" O L 6200 3600 50 
F7 "CELLS_0" I R 7400 5200 50 
F8 "CELLS_1" I R 7400 5100 50 
F9 "CELLS_2" I R 7400 5000 50 
F10 "CELLS_3" I R 7400 4900 50 
F11 "CELLS_4" I R 7400 4800 50 
F12 "CELLS_5" I R 7400 4700 50 
F13 "REGOUT" O R 7400 4500 50 
F14 "BAT+" I R 7400 3500 50 
F15 "R_SENSE-" I R 7400 4000 50 
F16 "R_SENSE+" I R 7400 4100 50 
F17 "TS1+" I R 7400 4200 50 
F18 "TS1-" I R 7400 4300 50 
F19 "BTN_PWR" O L 6200 3700 50 
$EndSheet
$Sheet
S 8900 1900 900  600 
U 58363B12
F0 "Power Supply" 50
F1 "power_supply.sch" 50
F2 "BAT+" I L 8900 2100 50 
F3 "PWR_EN" I L 8900 2300 50 
$EndSheet
$Sheet
S 1500 1900 1200 2000
U 58AF4F23
F0 "Communication" 50
F1 "interfaces.sch" 50
F2 "UEXT_RX" O R 2700 2200 50 
F3 "UEXT_SDA" B R 2700 2500 50 
F4 "UEXT_MOSI" I R 2700 2800 50 
F5 "UEXT_SSEL" I R 2700 3000 50 
F6 "UEXT_MISO" O R 2700 2700 50 
F7 "UEXT_SCK" I R 2700 2900 50 
F8 "UEXT_SCL" I R 2700 2400 50 
F9 "UEXT_TX" I R 2700 2100 50 
F10 "USB_DM" B R 2700 3700 50 
F11 "USB_DP" B R 2700 3600 50 
F12 "CAN_RX" O R 2700 3300 50 
F13 "CAN_TX" I R 2700 3200 50 
F14 "CAN_STB" I R 2700 3400 50 
$EndSheet
$Sheet
S 3600 1900 1400 2000
U 58E2D38D
F0 "MCU" 50
F1 "mcu.sch" 50
F2 "TEMP_1" I R 5000 2100 50 
F3 "CAN_TX" O L 3600 3200 50 
F4 "CAN_RX" I L 3600 3300 50 
F5 "I2C1_SDA" B L 3600 2500 50 
F6 "I2C1_SCL" O L 3600 2400 50 
F7 "SPI1_MOSI" O L 3600 2800 50 
F8 "SPI1_MISO" I L 3600 2700 50 
F9 "SPI1_SCK" O L 3600 2900 50 
F10 "USB_DM" B L 3600 3700 50 
F11 "USB_DP" B L 3600 3600 50 
F12 "CAN_STB" O L 3600 3400 50 
F13 "USART2_RX" I L 3600 2200 50 
F14 "USART2_TX" O L 3600 2100 50 
F15 "SSEL" O L 3600 3000 50 
F16 "I2C2_SCL" O R 5000 3500 50 
F17 "I2C2_SDA" B R 5000 3400 50 
F18 "TEMP_2" I R 5000 2200 50 
F19 "V_BAT" I R 5000 2400 50 
F20 "V_LOAD" I R 5000 2500 50 
F21 "PCHG_EN" O R 5000 3100 50 
F22 "ALERT_IN" I R 5000 3600 50 
F23 "TS1_BQ" O R 5000 3000 50 
F24 "SW_POWER" I R 5000 3700 50 
$EndSheet
$Comp
L Conn_Switch-N-Sense P1
U 1 1 58E8147B
P 9600 3700
F 0 "P1" H 9600 4450 50  0000 C CNN
F 1 "Conn_Switch-N-Sense" H 9600 2950 50  0000 C CNN
F 2 "LibreSolar:Wuerth_WR-FPC_686112148922" H 9600 2500 50  0001 C CNN
F 3 "" H 9600 2500 50  0000 C CNN
F 4 "Würth" H 9600 3700 60  0001 C CNN "Manufacturer"
F 5 "686112148922" H 9600 3700 60  0001 C CNN "PartNumber"
	1    9600 3700
	1    0    0    -1  
$EndComp
$Sheet
S 6200 1700 1200 1100
U 58E843BF
F0 "Analog Frontend" 50
F1 "analog_frontend.sch" 50
F2 "V_BAT" I L 6200 2400 50 
F3 "LOAD+" I R 7400 2200 50 
F4 "BAT+" I R 7400 2100 50 
F5 "V_LOAD" O L 6200 2500 50 
F6 "TEMP_2" O L 6200 2200 50 
F7 "TEMP_1" O L 6200 2100 50 
$EndSheet
$Comp
L CONN_01X06 P2
U 1 1 58F30336
P 8200 4950
F 0 "P2" H 8200 5300 50  0000 C CNN
F 1 "CONN_01X06" V 8300 4950 50  0000 C CNN
F 2 "LibreSolar:Phoenix_Contact_MC_1,5_6-G-3,81" H 8200 4950 50  0001 C CNN
F 3 "" H 8200 4950 50  0000 C CNN
F 4 "Phoenix Contact" H 8200 4950 60  0001 C CNN "Manufacturer"
F 5 "1803316" H 8200 4950 60  0001 C CNN "PartNumber"
F 6 "MC 1,5/ 6-G-3,81" H 8200 4950 60  0001 C CNN "Remarks"
	1    8200 4950
	1    0    0    -1  
$EndComp
Wire Wire Line
	7400 3700 8500 3700
Wire Wire Line
	8500 3700 8500 3500
Wire Wire Line
	8500 3500 9200 3500
Wire Wire Line
	9200 3600 8600 3600
Wire Wire Line
	8600 3600 8600 3800
Wire Wire Line
	8600 3800 7400 3800
Wire Wire Line
	7400 4000 8800 4000
Wire Wire Line
	8800 4000 8800 3900
Wire Wire Line
	8800 3900 9200 3900
Wire Wire Line
	7400 4100 8900 4100
Wire Wire Line
	8900 4100 8900 4000
Wire Wire Line
	8900 4000 9200 4000
Wire Wire Line
	7400 4200 9200 4200
Wire Wire Line
	7400 4300 9200 4300
Wire Wire Line
	7400 2100 8900 2100
Wire Wire Line
	7500 3100 9200 3100
Wire Wire Line
	8200 3100 8200 2100
Connection ~ 8200 2100
Wire Wire Line
	7500 3100 7500 3500
Wire Wire Line
	7500 3500 7400 3500
Connection ~ 8200 3100
Wire Wire Line
	7400 2200 8100 2200
Wire Wire Line
	8100 2200 8100 3200
Wire Wire Line
	8100 3200 9200 3200
$Comp
L GND #PWR01
U 1 1 58F56B2A
P 8300 3400
F 0 "#PWR01" H 8300 3150 50  0001 C CNN
F 1 "GND" H 8300 3250 50  0000 C CNN
F 2 "" H 8300 3400 50  0000 C CNN
F 3 "" H 8300 3400 50  0000 C CNN
	1    8300 3400
	1    0    0    -1  
$EndComp
Wire Wire Line
	9200 3300 8300 3300
Wire Wire Line
	8300 3300 8300 3400
Wire Wire Line
	9200 3700 8800 3700
Text Label 8800 3700 0    50   ~ 0
PCHG_EN
Text Label 7600 4200 0    50   ~ 0
TS1
Wire Wire Line
	5000 3000 5400 3000
Wire Wire Line
	5000 3100 5400 3100
Text Label 5400 3000 2    50   ~ 0
TS1
Text Label 5400 3100 2    50   ~ 0
PCHG_EN
Wire Wire Line
	5000 3400 6200 3400
Wire Wire Line
	6200 3500 5000 3500
Wire Wire Line
	5000 3600 6200 3600
Wire Wire Line
	6200 2500 5000 2500
Wire Wire Line
	5000 2400 6200 2400
Wire Wire Line
	6200 2200 5000 2200
Wire Wire Line
	5000 2100 6200 2100
Wire Wire Line
	7400 4700 8000 4700
Wire Wire Line
	7400 4800 8000 4800
Wire Wire Line
	7400 4900 8000 4900
Wire Wire Line
	7400 5000 8000 5000
Wire Wire Line
	7400 5100 8000 5100
Wire Wire Line
	7400 5200 8000 5200
Wire Wire Line
	7400 4500 7800 4500
Text Label 7800 4500 2    50   ~ 0
REGOUT
Wire Wire Line
	8300 2300 8900 2300
Text Label 8300 2300 0    50   ~ 0
REGOUT
Wire Wire Line
	2700 2100 3600 2100
Wire Wire Line
	3600 2200 2700 2200
Wire Wire Line
	2700 2400 3600 2400
Wire Wire Line
	3600 2500 2700 2500
Wire Wire Line
	2700 2700 3600 2700
Wire Wire Line
	3600 2800 2700 2800
Wire Wire Line
	2700 2900 3600 2900
Wire Wire Line
	3600 3000 2700 3000
Wire Wire Line
	2700 3200 3600 3200
Wire Wire Line
	3600 3300 2700 3300
Wire Wire Line
	2700 3400 3600 3400
Wire Wire Line
	3600 3600 2700 3600
Wire Wire Line
	2700 3700 3600 3700
$Comp
L LIBRE_SOLAR LOGO2
U 1 1 58F7CBC4
P 5650 7050
F 0 "LOGO2" H 5650 7325 50  0000 C CNN
F 1 "LIBRE_SOLAR" H 5650 6825 50  0000 C CNN
F 2 "LibreSolar:LIBRESOLAR_LOGO" H 5670 7040 60  0001 C CNN
F 3 "" H 5670 7040 60  0001 C CNN
	1    5650 7050
	1    0    0    -1  
$EndComp
$Comp
L OPEN_HARDWARE_1 LOGO1
U 1 1 58F7CD5F
P 4900 7050
F 0 "LOGO1" H 4900 7325 50  0000 C CNN
F 1 "OPEN_HARDWARE_1" H 4900 6825 50  0000 C CNN
F 2 "Symbols:OSHW-Logo_5.7x6mm_SilkScreen" H 4900 7050 50  0001 C CNN
F 3 "" H 4900 7050 50  0001 C CNN
	1    4900 7050
	1    0    0    -1  
$EndComp
Wire Wire Line
	6200 3700 5000 3700
$Comp
L TEST TP4
U 1 1 591748EB
P 8000 1700
F 0 "TP4" H 8078 1840 50  0000 L CNN
F 1 "Bat+" H 8078 1749 50  0000 L CNN
F 2 "LibreSolar:TestPoint_0.8mm_hole" H 8000 1700 50  0001 C CNN
F 3 "" H 8000 1700 50  0001 C CNN
	1    8000 1700
	1    0    0    -1  
$EndComp
Wire Wire Line
	8000 1700 8000 2100
Connection ~ 8000 2100
$Comp
L TEST TP5
U 1 1 591783E5
P 8700 1700
F 0 "TP5" H 8778 1840 50  0000 L CNN
F 1 "Regout" H 8778 1749 50  0000 L CNN
F 2 "LibreSolar:TestPoint_0.8mm_hole" H 8700 1700 50  0001 C CNN
F 3 "" H 8700 1700 50  0001 C CNN
	1    8700 1700
	1    0    0    -1  
$EndComp
$Comp
L TEST TP3
U 1 1 5917857D
P 7600 1700
F 0 "TP3" H 7678 1840 50  0000 L CNN
F 1 "Load+" H 7678 1749 50  0000 L CNN
F 2 "LibreSolar:TestPoint_0.8mm_hole" H 7600 1700 50  0001 C CNN
F 3 "" H 7600 1700 50  0001 C CNN
	1    7600 1700
	1    0    0    -1  
$EndComp
Wire Wire Line
	7600 1700 7600 2200
Connection ~ 7600 2200
Wire Wire Line
	8700 1700 8700 2300
Connection ~ 8700 2300
$Comp
L TEST TP6
U 1 1 5917D3E9
P 5700 3100
F 0 "TP6" H 5778 3240 50  0000 L CNN
F 1 "SDA" H 5778 3149 50  0000 L CNN
F 2 "LibreSolar:TestPoint_0.8mm_hole" H 5700 3100 50  0001 C CNN
F 3 "" H 5700 3100 50  0001 C CNN
	1    5700 3100
	1    0    0    -1  
$EndComp
$Comp
L TEST TP7
U 1 1 5917D5BB
P 6000 3100
F 0 "TP7" H 6078 3240 50  0000 L CNN
F 1 "SCL" H 6078 3149 50  0000 L CNN
F 2 "LibreSolar:TestPoint_0.8mm_hole" H 6000 3100 50  0001 C CNN
F 3 "" H 6000 3100 50  0001 C CNN
	1    6000 3100
	1    0    0    -1  
$EndComp
Wire Wire Line
	5700 3100 5700 3400
Connection ~ 5700 3400
Wire Wire Line
	6000 3100 6000 3500
Connection ~ 6000 3500
$EndSCHEMATC
